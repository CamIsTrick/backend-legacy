version: '3.7'
services:
  kurento:
    image: kurento/kurento-media-server:7.0.0
    volumes:
      - $HOME/focusing/volume/kurento:/data
    ports:
      - "8888:8888"
      - "8443:8443"
      - "3478:3478"
      - "3478:3478/udp"
      - "5000-5050:5000-5050/udp"
      - "1-65535:1-65535/udp"
    environment:
      - KMS_MIN_PORT=5000
      - KMS_MAX_PORT=5050
      - KMS_STUN_IP=23.21.150.121
      - KMS_STUN_PORT=3478
  nginx:
    image: nginx:latest
    command: |
      /bin/bash -c "
      cp -f data/default.conf etc/nginx/conf.d/default.conf 
      service nginx start 
      sleep infinity"
    volumes:
      - $HOME/focusing/volume/nginx:/data
    ports:
      - "80:80"
      - "443:443"